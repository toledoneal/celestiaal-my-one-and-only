// script.js

// Questions
const questions = [
  { q: "Which do you prefer Jollibee or Mcdo", a: "Jollibee" },
  { q: "Do you like Motorcycle or Car more?", a: "Car" },
  { 
    q: "What does Jasmine prefer doing when on a vacation or goes to a pool with fam?", 
    a: "A", 
    note: "D should've been the right answer ðŸ˜‰",
    options: {
      A: "Sits quietly and reads her book peacefully",
      B: "Dips herself in the pool",
      C: "Watch horror videos",
      D: "Call Neal because she misses her"
    }
  },
  { q: "Diana or Nicole", a: "Diana" },
  { q: "Do you get irritated by Neal sometimes?", a: "No" }
];

let currentQuestion = 0;

// Display first question
displayQuestion();

function displayQuestion() {
  const qObj = questions[currentQuestion];
  const container = document.getElementById('questionContainer');
  container.innerHTML = "";

  const questionDiv = document.createElement('div');
  questionDiv.id = "question";
  questionDiv.textContent = qObj.q;
  container.appendChild(questionDiv);

  if (qObj.options) {
    for (let key in qObj.options) {
      const btn = document.createElement('button');
      btn.textContent = `${key}. ${qObj.options[key]}`;
      btn.onclick = () => handleAnswer(key);
      container.appendChild(btn);
    }
  } else {
    const input = document.createElement('input');
    input.type = "text";
    input.id = "answer";
    input.placeholder = "Type your answer";
    container.appendChild(input);

    const submitBtn = document.createElement('button');
    submitBtn.textContent = "Submit";
    submitBtn.onclick = () => handleAnswer(document.getElementById('answer').value.trim());
    container.appendChild(submitBtn);
  }
}

function handleAnswer(answer) {
  const qObj = questions[currentQuestion];

  if (answer.toLowerCase() === qObj.a.toLowerCase()) {
    if (qObj.note && answer.toUpperCase() === "A") {
      alert(qObj.note);
    }

    currentQuestion++;

    if (currentQuestion < questions.length) {
      displayQuestion();
    } else {
      document.getElementById('questionContainer').style.display = "none";
      document.getElementById('envelopeContainer').style.display = "block";
    }
  } else {
    alert("Oops! You owe me a selfie. Try again.");
  }
}

// Letter pages
const letterPages = [
`To: Jasmine, My love.<br><br>
If I were sleepy or bag-ko ko nimata ron I'd spam this letter with I miss you and I love you bitaw. Sige, I'll start this off by like saying that I'm really grateful for you, the way you speak things up nako, the way you handle certain situations, the way you don't disregard people's feelings, the way you assure me sa mga imo iingon, idkkk the way that u do things your way. You know there are a lot of things jud that you do that I don't comprehend bitaw like how are you this good with it in ana. It's jsut that I don't know how id tell u and make you feel what I feel when u do those stuff. Really. You know id get overwhelmed by you jud tas id compliment u in my mind and not be vocal about it with the things that you do, mao sad jud gurong you think i only like u for ur looks btaw...`,

`...kay i dont like tell u that i like this abt u and that. But I do, there are a lot of things gyud and I tell it to you now this program would explode cause it wouldnt also comprehend the you are and the way I see you, my love. Really I'm so grateful for you bitaw, I promise ill construct this properly next time.<br><br>
Now, I'll apologize for like overthinking stuff, and like making you prove myself with the way I insisted ganiha, it doenst matter if it was because ga selos ko in ana. I take full accountability ato...`,

`...I love you, lang. I don't think jud gani nga if ever maabot sa time nga in ana musugot jud dayun ko without having to fight for you, kay you know no matter what Id do anything raba jud to have you. Bisan karon, I'm not intimidated by those who like you, kay I'm confident with who I am and what I could do. Yk I dont give up easily specially if its something/someone I really like. I promise. And I'll keep showing it to you. Actually 89 years limit ani man.<br><br>
Siguro if God allows it we'll continue to talk about this ha...`,

`...I love you, Jasmine. I'd still love u even if youre a fork right now, or even a show, a spoon, a door. I'd love every version of you.<br><br>
Through Him, with love,<br>
Tods.`
];

let currentPage = 0;

function openEnvelope() {
  const envelope = document.getElementById('envelope');
  envelope.classList.add('open');

  setTimeout(() => {
    document.getElementById('envelopeContainer').style.display = "none";
    document.getElementById('letterContainer').style.display = "block";
    currentPage = 0;
    showPage();
  }, 800);
}

function showPage() {
  document.getElementById('letterContent').innerHTML = letterPages[currentPage];
  
  // Show/hide buttons
  document.getElementById('nextPageBtn').style.display = currentPage === letterPages.length - 1 ? "none" : "inline-block";

  if (!document.getElementById('prevPageBtn')) {
    const prevBtn = document.createElement('button');
    prevBtn.id = "prevPageBtn";
    prevBtn.textContent = "Previous";
    prevBtn.onclick = prevPage;
    document.getElementById('letterContainer').insertBefore(prevBtn, document.getElementById('nextPageBtn'));
  }

  document.getElementById('prevPageBtn').style.display = currentPage === 0 ? "none" : "inline-block";
}

function nextPage() {
  if (currentPage < letterPages.length - 1) {
    currentPage++;
    showPage();
  }
}

function prevPage() {
  if (currentPage > 0) {
    currentPage--;
    showPage();
  }
}
